<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>管理系统商品添加页面</title>
		<link href="${webroot}/resources/system/css/product/issue.css" rel="stylesheet" type="text/css" />
		<link href="${webroot}/resources/system/css/list.css" rel="stylesheet" type="text/css" />
		<!-- 上传文件的CSS -->
		<link href="${webroot}/resources/commons/css/upload.css" rel="stylesheet" type="text/css" />
		<script src="${webroot}/resources/commons/js/jquery-1.8.3.min.js"></script>
		<script type="text/javascript" src="${webroot}/resources/commons/js/jquery-1.8.3.min.js"></script>
			<script type="text/javascript" src="${webroot}/resources/commons/js/upload.js"></script>
		<script type="text/javascript" src="${webroot}/resources/commons/js/jquery.form.js"></script>
		<script type="text/javascript" src="${webroot}/resources/commons/js/jquery.soChange.js"></script>
		<script type="text/javascript" src="${webroot}/resources/commons/js/jquery.json-2.2.min.js"></script>
		<script type="text/javascript" src="${webroot}/resources/commons/js/ajaxupload.js"></script>
		<script type="text/javascript" src="${webroot}/resources/plugin/ckeditor/ckeditor.js"></script>
		<script type="text/javascript" src="${webroot}/resources/system/js/tools.js"></script>
		<script type="text/javascript" src="${webroot}/resources/system/js/base.js"></script>
		<script type="text/javascript" src="${webroot}/resources/system/js/product/productAdd.js"></script>
		<!-- 上传文件控件  -->
		<script type="text/javascript" src="${webroot}/resources/commons/js/upload/upload.js"></script>
	</head>
	
<body>
#define(com.ekfans.base.product.model.ProductTemplate productTemplate)
#define(com.ekfans.base.product.model.ProductCategory productCategory)

<input type="hidden" id="ctxpath" value="${webroot}" />
<input type="hidden" id="idCheck" value="false" />
<input type="hidden" id="nameCheck" value="false" />
<input type="hidden" id="type" value="${type}" />		
<form action="${webroot}/system/product/save" name="addOk" method="post"  id="addProductForm">
	<input type="hidden" name="storeId" id="storeId" value="">
	<input type="hidden" name="brand" id="brand" value="">
	<input type="hidden" class="i_bg" name="mainCategory" value="${productCategory.id}" >
	<input type="hidden" class="i_bg" name="categoryName" value="${productCategoryName}" >
	
	<div class="ht_btn">
		<a href="javascript:void(0);"  class="btn"  onclick="formSubmit();">保存</a>
		<a href="javascript:void(0);"  class="btn" onclick="goBack('${webroot}');">取消</a>
	</div>
		
	<div class="add_pro">
		<div class="ts" style="float:left; width:500px;  margin-right: 20px; ">
    	<a href="javascript:void(0);">${pcName}</a>&nbsp;&nbsp;
    </div>
    <div>
    	<a href="javascript:restCatory('${webroot}');" class="btn" style="align:right;">选择分类</a>
    </div>
   
		<dl class="afterHt">
			<dt>商品编号<em class="mustIco"></em></dt>
			<dd id="idDd">
				<input type="text" class="i_bg"  name="productNumber" onblur="checkIdBlur(this.value);" onkeyup="checkId(this.value,'${webroot}');" onfocus="checkId(this.value,'${webroot}');"/>
				<span id="idSpan" class="ts_xx">商品编号为6-16位字符</span>
			</dd>
		</dl>
    
		<dl>
			<dt>商品状态<em class="mustIco"></em></dt>
			<dd>
				<span class="zt"><label><input type="radio" name="status" value="true">上架</label></span>
				<span class="zt radioSel"><label><input type="radio" name="status" checked value="false">下架</label></span>
			</dd>
		</dl>
    <div class="clear"></div>
   	<dl>
			<dt>是否可预定<em class="mustIco"></em></dt>
			<dd>
				<span class="zt radioSel" onclick="checkRadioD();"><label><input type="radio" name="isAdvance" value="0" checked>不支持</label></span>
				<span class="zt" onclick="checkRadioD();"><label><input type="radio" name="isAdvance" value="1" >支持</label></span>
			</dd>
		</dl>
		<dl>
			<dt>商品名称<em class="mustIco"></em></dt>
			<dd id="nameDd">
				<input type="text" class="i_bg"  name="name" onblur="javascript:checkNameBlur();" onkeyup="javascript:checkName();" onfocus="javascript:checkName();" />
				<span id="nameSpan" class="ts_xx">1-128位字符组成</span>
			</dd>
		</dl>
		<div class="clear"></div>
		<dl>
			<dt>库存量<em class="mustIco"></em></dt>
			<dd><input type="text" class="i_bg"  name="quantity"  id="quantity" value="0" onpaste="return false" onblur="javascript:if(this.value==''){this.value=0;}" onkeyup="javascript:clearNoNum(this)"/></dd>
		</dl>
		<dl>
			<dt>数量单位<em class="mustIco"></em></dt>
			<dd>
				<input type="text" class="i_bg"  name="unit"  id="unit"/>
				<span style="color:#888;">商品的数量单位。如:吨</span>	
			</dd>
		</dl>
    <div class="clear"></div>
		<dl>
			<dt>库存预警<em class="mustIco"></em></dt>
			<dd><input type="text" value="0" class="i_bg" name="quantityWarning" id="quantityWarning" onpaste="return false" onblur="javascript:if(this.value==''){this.value=0;}" onkeyup="javascript:clearNoNum(this)"></dd>
		</dl>
		<dl>
			<dt>商城价<em class="mustIco"></em></dt>
			<dd><input type="text" class="i_bg"  name="unitPrice"  value="0.00" id="unitPrice" onpaste="return false" onblur="javascript:if(this.value==''){this.value=0;}" onkeyup="javascript:clearNoNum(this)"/></dd>
		</dl>
    <div class="clear"></div>
		
		<dl>
			<dt>批发参考价<em class="mustIco"></em></dt>
			<dd><input type="text" class="i_bg"  name="pfPrice"  value="0.00" onpaste="return false" onblur="javascript:if(this.value==''){this.value=0;}" onkeyup="javascript:clearNoNum(this)"/></dd>
		</dl>
		
		<div class="clear"></div>	
		<font id="advanceFont" style="display:none;">
				<dl>
					<dt>预定价格</dt>
					<dd><input type="text" class="i_bg"  name="advancePrice"  value="0.00" onpaste="return false" onblur="javascript:if(this.value==''){this.value=0;}" onkeyup="javascript:clearNoNum(this)"/></dd>
				</dl>
				
				<dl>
					<dt>起订数量</dt>
					<dd><input type="text" class="i_bg"  name="advanceNum"  id="quantity" value="0" onpaste="return false" onblur="javascript:if(this.value==''){this.value=0;}" onkeyup="javascript:clearNoNum(this)"/></dd>
				</dl>
			</font>
		<dl>
			<dt>商品产地</dt>
			<dd>
				#tag systemAreaSel("habitat","") #end
			</dd>
		</dl>
		
		<dl>
			<dt>产地详细地址</dt>
			<dd>
				<input type="text" name="habitatAddress" class="i_bg">
			</dd>
		</dl>
		<div class="clear"></div>	
		<dl>
			<dt>运费</dt>
			<dd><input type="text" class="i_bg"  name="fare"  value="0.00" onpaste="return false" onblur="javascript:if(this.value==''){this.value=0;}" onkeyup="javascript:clearNoNum(this)"/></dd>
		</dl>
		
		<dl>
			<dt>商品名缩写</dt>
			<dd><input type="text" name="sortName" class="i_bg"></dd>
		</dl>
    <div class="clear"></div>
		<dl>
			<dt>商品型号</dt>
			<dd><input type="text" name="productModel" class="i_bg"></dd>
		</dl><dl>
			<dt>检测机构名称</dt>
			<dd><input type="text" name="jcjg" class="i_bg"></dd>
		</dl>
		<div class="clear"></div>
		<dl>
			<dt>检测报告</dt>
			<dd>  #tag fileUpload("jcFile","pdf","") #end </dd>
		</dl>
		<dl>
			<dt>交货地址</dt>
			<dd><input type="text" name="deliceAddress" class="i_bg"></dd>
		</dl>
		<div class="clear"></div>
		<dl>
			<dt>交货方式</dt>
			<dd><input type="text" name="deliceType" class="i_bg"></dd>
		</dl>
		<dl>
			<dt>交货日</dt>
			<dd><input type="text" name="deliceData" class="i_bg"></dd>
		</dl>
		<div class="clear"></div>
			<dl>
			<dt>付款方式</dt>
			<dd><input type="text" name="payType" class="i_bg"></dd>
		</dl>
		<dl class="linkAlert">
			<dt>店铺<em class="mustIco"></em></dt>
			<dd id="storeIdDd">
				<input id="storeName" class="i_bg" type="text" readOnly />
				<span id="storeSpan" class="pp" title="关联店铺菜单" onclick="loadStore();" ></span>
				<span id="nameSpan" class="ts_xx">请选择店铺</span>
			</dd>
		</dl>
		<dl class="linkAlert">
			<dt>品牌</dt>
			<dd id="brandDd">
				<input id="brandName" class="i_bg" type="text" readOnly />
				<span id="brandSpan" class="pp" title="关联品牌菜单" onclick="loadBrand();" ></span>
			</dd>
		</dl>
    <div class="clear"></div>
    <!--
		<dl class="linkAlert">
			<a href="javascript:void(0);" class="btn btnAddLine">添加价格区间</a>
			<span style="margin-top:15px; display:block; line-height:24px; color:#888;">设置批发的价格，如：0-100，单价50，则表示小于100数量的单价都是50。反之，如果100-0，单价30，则表示大于或等于100数量的单价为30</span>
			
			<div class="pfPriceList">
				<div class="listHeader">
					<div class="listTd startNum">起始数量</div>
					<div class="listTd endNum">最大数量</div>
					<div class="listTd listPrice">单价</div>
					<div class="listTd listSet">操作</div>
				</div>
				<div class="listItem">
					<div class="listTd startNum"><input name="startNum" type="text" class="i_bg box50" value="0"></div>
					<div class="listTd endNum"><input name="endNum" type="text" class="i_bg box50" value="0"></div>
					<div class="listTd listPrice"><input name="productListPrice" type="text" class="i_bg box80" value="0.00"></div>
					<div class="listTd listSet"></div>
					<input type="hidden" name="productPrices" class="productPrices"/>
					<div class="clear"></div>
				</div>
			</div>
		</dl>
		-->
		<dl>
			<dt>模板<em class="mustIco"></em></dt>
			<dd>
				<select name="proTemplate" class="i_bg" onchange="loadTempfields(this.value);">
					<option value="">--请选择--</option>
					#if(productTemplate != null)
						<option value="${productTemplate.id}">${productTemplate.name}</option>
					#end
					<option value="1">系统默认</option>
				</select>
			</dd>
		</dl>
		<dl class="formBoxLine">
			<dt>搜索关键字</dt>
			<dd><textarea name="searchKey" ></textarea></dd>
			<dd class="clear"></dd>
		</dl>
    <div class="clear"></div>
    
    <!-- 遍历出可选字段的扩展字段和扩展字段的值 -->
		<font id="tempFieldsFont">
		</font>
    <!-- 结束 -->
    
		<dl class="formBoxLine">
			<dt>商品图片</dt>
			<dd>
				#tag picUpload("picture","1","200","200","") #end
			</dd>
			<dd class="clear"></dd>
		</dl>
    
		<dl class="formBoxLine">
			<dt>多角度视图</dt>
			<dd>
				<div id="picForClone" style="display:none;">
			    <div class="uploadItem">
						#tag picUpload("picClone","1","200","200","") #end
						<a href="javascript:void(0);" id="picClone" class="closeIco"><img src="${webroot}/resources/system/images/del2.jpg" width="16" height="16"></a>
		    	</div>
		    </div>
			
				<div class="uploadItem">
					#tag picUpload("popImage","1","200","200","") #end
				</div>
				
				<a href="javascript:void(0);" class="btnAdd">增加图片</a>
				<input type="hidden" name="popPicProperties" id="popPicProperties" value="popImage;"/>
			</dd>
			<dd class="clear"></dd>
		</dl>
    
		<dl class="formBoxLine countBox">
			<dt>商品备注</dt>
			<dd><textarea name="note" class="bigBox"></textarea></dd>
			<dd class="clear"></dd>
		</dl>
		<dl class="formBoxLine">
			<dt>商品描述</dt>
			<dd>
				<textarea name="description" id="description" class="ckeditor"></textarea>
			</dd>
			<dd class="clear"></dd>
		</dl>
	</div>

	<!-- 关联店铺模块 -->
	<div class="del_tcBg" id="storeBg"></div>
	<div class="del_tc shopListAlert"  id="storetc" ></div>
	
	<!--  关联品牌 -->
	<div class="del_tcBg" id="brandBg" ></div>
	<div class="del_tc shopListAlert"  id="brandtc"></div>
	
	<!--  关联模板 -->
	<div class="del_tcBg" id="templateBg" style="display:none;"></div>
	<div class="del_tc shopListAlert"  id="templatetc" style="display:none;"></div>

</form>
	<div id="addFieldsDemo" style="display:none;">
		<div class="listItem">
	      <div class="listTd startNum"><input name="startNum" type="text" class="i_bg box50" value="0"></div>
	      <div class="listTd endNum"><input name="endNum" type="text" class="i_bg box50" value="0"></div>
	      <div class="listTd listPrice"><input name="productListPrice" type="text" class="i_bg box80" value="0.00"></div>
	      <div class="listTd listSet">
	      	<a href='javascript:void(0);' class='btnRemoveLine'><img src='${webroot}/resources/system/images/del2.jpg' width='16' height='16'></a>
		  </div>
		  <input type="hidden" name="productPrices" class="productPrices"/>
	      <div class="clear"></div>
		</div>
	</div>
	
	<div class="loadingLayer" id="loadingLayer" style="display:none"></div>
	<script>
		$(function () {
	    CKEDITOR.replace('description', { height: '540px'});
		});
		</script>
</body>
</html>